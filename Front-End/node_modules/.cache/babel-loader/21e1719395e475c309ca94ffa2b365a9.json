{"remainingRequest":"/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/node_modules/babel-loader/lib/index.js!/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/src/views/MinhasPropostas.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/src/views/MinhasPropostas.vue","mtime":1769992492660},{"path":"/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/babel.config.js","mtime":1769967689617},{"path":"/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/node_modules/cache-loader/dist/cjs.js","mtime":1769949775297},{"path":"/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/node_modules/babel-loader/lib/index.js","mtime":1769949776082},{"path":"/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/node_modules/cache-loader/dist/cjs.js","mtime":1769949775297},{"path":"/home/pedro/MEGA/Mestrado UAB/Programacao WEB Avancada/Tarefa 5/ProjetoFinal/Front-End/node_modules/vue-loader/lib/index.js","mtime":1769949776231}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maWx0ZXIuanMiOwppbXBvcnQgaHR0cCBmcm9tICcuLi9hcGkvaHR0cCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvcG9zdGFzOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHE6ICcnLAogICAgICBlc3RhZG86ICcnLAogICAgICBlc3RhZG9PcHRpb25zOiBbewogICAgICAgIHZhbHVlOiAnJywKICAgICAgICB0ZXh0OiAnVG9kb3MnCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogJ3Jhc2N1bmhvJywKICAgICAgICB0ZXh0OiAnUmFzY3VuaG8nCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogJ3B1YmxpY2FkYScsCiAgICAgICAgdGV4dDogJ1B1YmxpY2FkYScKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnYXJxdWl2YWRhJywKICAgICAgICB0ZXh0OiAnQXJxdWl2YWRhJwogICAgICB9XSwKICAgICAgZmllbGRzOiBbewogICAgICAgIGtleTogJ3RpdHVsbycsCiAgICAgICAgbGFiZWw6ICdUw610dWxvJwogICAgICB9LCB7CiAgICAgICAga2V5OiAnZXN0YWRvJywKICAgICAgICBsYWJlbDogJ0VzdGFkbycKICAgICAgfSwgewogICAgICAgIGtleTogJ3BhbGF2cmFzQ2hhdmUnLAogICAgICAgIGxhYmVsOiAnUGFsYXZyYXMtY2hhdmUnCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICd1cGRhdGVkQXQnLAogICAgICAgIGxhYmVsOiAnQXR1YWxpemFkYScKICAgICAgfSwgewogICAgICAgIGtleTogJ2Fjb2VzJywKICAgICAgICBsYWJlbDogJ0HDp8O1ZXMnCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbHRlcmVkKCkgewogICAgICBjb25zdCBxcSA9IHRoaXMucS50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgICAgcmV0dXJuIHRoaXMucHJvcG9zdGFzLmZpbHRlcihwID0+IHRoaXMuZXN0YWRvID8gcC5lc3RhZG8gPT09IHRoaXMuZXN0YWRvIDogdHJ1ZSkuZmlsdGVyKHAgPT4gewogICAgICAgIGlmICghcXEpIHJldHVybiB0cnVlOwogICAgICAgIGNvbnN0IGJsb2IgPSBbcC50aXR1bG8sIC4uLihwLnBhbGF2cmFzQ2hhdmUgfHwgW10pXS5qb2luKCcgJykudG9Mb3dlckNhc2UoKTsKICAgICAgICByZXR1cm4gYmxvYi5pbmNsdWRlcyhxcSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgbG9hZCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBkYXRhCiAgICAgICAgfSA9IGF3YWl0IGh0dHAuZ2V0KCcvcHJvcG9zdGFzL21pbmhhcycpOwogICAgICAgIHRoaXMucHJvcG9zdGFzID0gZGF0YTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuJGFsZXJ0KCdOw6NvIGZvaSBwb3Nzw612ZWwgb2J0ZXIgYXMgcHJvcG9zdGFzLicpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgY29uZmlybURlbGV0ZShpdGVtKSB7CiAgICAgIGNvbnN0IG9rID0gYXdhaXQgdGhpcy4kY29uZmlybShgQXBhZ2FyIGEgcHJvcG9zdGEgIiR7aXRlbS50aXR1bG99Ij9gKTsKICAgICAgaWYgKCFvaykgcmV0dXJuOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IGh0dHAuZGVsZXRlKGAvcHJvcG9zdGFzLyR7aXRlbS5faWR9YCk7CiAgICAgICAgdGhpcy4kYWxlcnQoJ1Byb3Bvc3RhIGFwYWdhZGEuJyk7CiAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLiRhbGVydCgnRXJybyBhbyBhcGFnYXIgcHJvcG9zdGEuJyk7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWQoKTsKICB9Cn07"},{"version":3,"names":["http","data","propostas","loading","q","estado","estadoOptions","value","text","fields","key","label","computed","filtered","qq","trim","toLowerCase","filter","p","blob","titulo","palavrasChave","join","includes","methods","load","get","e","$alert","confirmDelete","item","ok","$confirm","delete","_id","created"],"sources":["src/views/MinhasPropostas.vue"],"sourcesContent":["<template>\n  <b-container class=\"py-4\">\n    <b-button variant=\"link\" class=\"mb-2\" @click=\"$router.back()\">&larr; Voltar</b-button>\n\n    <div class=\"d-flex align-items-center justify-content-between mb-3\">\n      <h2 class=\"mb-0\">Minhas Propostas</h2>\n      <b-button variant=\"success\" to=\"/propostas/nova\">+ Nova</b-button>\n    </div>\n\n    <b-card class=\"mb-3\">\n      <b-row>\n        <b-col cols=\"12\" md=\"6\">\n          <b-form-group label=\"Pesquisar\">\n            <b-form-input v-model=\"q\" placeholder=\"título, palavras-chave\" />\n          </b-form-group>\n        </b-col>\n        <b-col cols=\"12\" md=\"6\">\n          <b-form-group label=\"Estado\">\n            <b-form-select v-model=\"estado\" :options=\"estadoOptions\" />\n          </b-form-group>\n        </b-col>\n      </b-row>\n    </b-card>\n\n    <b-table striped hover :items=\"filtered\" :fields=\"fields\">\n      <template #cell(palavrasChave)=\"data\">\n        <span v-for=\"(p, i) in data.item.palavrasChave\" :key=\"i\" class=\"badge badge-info mr-1\">{{ p }}</span>\n      </template>\n      <template #cell(acoes)=\"data\">\n        <b-button size=\"sm\" variant=\"outline-primary\" :to=\"`/propostas/${data.item._id}`\">Editar</b-button>\n        <b-button size=\"sm\" variant=\"outline-danger\" class=\"ml-2\" @click=\"confirmDelete(data.item)\">Apagar</b-button>\n      </template>\n    </b-table>\n\n    <p class=\"text-muted\" v-if=\"loading\">A carregar...</p>\n  </b-container>\n</template>\n\n<script>\nimport http from '../api/http';\n\nexport default {\n  data() {\n    return {\n      propostas: [],\n      loading: false,\n      q: '',\n      estado: '',\n      estadoOptions: [\n        { value: '', text: 'Todos' },\n        { value: 'rascunho', text: 'Rascunho' },\n        { value: 'publicada', text: 'Publicada' },\n        { value: 'arquivada', text: 'Arquivada' }\n      ],\n      fields: [\n        { key: 'titulo', label: 'Título' },\n        { key: 'estado', label: 'Estado' },\n        { key: 'palavrasChave', label: 'Palavras-chave' },\n        { key: 'updatedAt', label: 'Atualizada' },\n        { key: 'acoes', label: 'Ações' }\n      ]\n    };\n  },\n  computed: {\n    filtered() {\n      const qq = this.q.trim().toLowerCase();\n      return this.propostas\n        .filter((p) => (this.estado ? p.estado === this.estado : true))\n        .filter((p) => {\n          if (!qq) return true;\n          const blob = [p.titulo, ...(p.palavrasChave || [])].join(' ').toLowerCase();\n          return blob.includes(qq);\n        });\n    }\n  },\n  methods: {\n    async load() {\n      this.loading = true;\n      try {\n        const { data } = await http.get('/propostas/minhas');\n        this.propostas = data;\n      } catch (e) {\n        this.$alert('Não foi possível obter as propostas.');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async confirmDelete(item) {\n      const ok = await this.$confirm(`Apagar a proposta \"${item.titulo}\"?`);\n      if (!ok) return;\n      try {\n        await http.delete(`/propostas/${item._id}`);\n        this.$alert('Proposta apagada.');\n        this.load();\n      } catch (e) {\n        this.$alert('Erro ao apagar proposta.');\n      }\n    }\n  },\n  created() {\n    this.load();\n  }\n};\n</script>\n"],"mappings":";;AAuCA,OAAAA,IAAA;AAEA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,CAAA;MACAC,MAAA;MACAC,aAAA,GACA;QAAAC,KAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,IAAA;MAAA,EACA;MACAC,MAAA,GACA;QAAAC,GAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,GAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,GAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,GAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,GAAA;QAAAC,KAAA;MAAA;IAEA;EACA;EACAC,QAAA;IACAC,SAAA;MACA,MAAAC,EAAA,QAAAV,CAAA,CAAAW,IAAA,GAAAC,WAAA;MACA,YAAAd,SAAA,CACAe,MAAA,CAAAC,CAAA,SAAAb,MAAA,GAAAa,CAAA,CAAAb,MAAA,UAAAA,MAAA,SACAY,MAAA,CAAAC,CAAA;QACA,KAAAJ,EAAA;QACA,MAAAK,IAAA,IAAAD,CAAA,CAAAE,MAAA,MAAAF,CAAA,CAAAG,aAAA,SAAAC,IAAA,MAAAN,WAAA;QACA,OAAAG,IAAA,CAAAI,QAAA,CAAAT,EAAA;MACA;IACA;EACA;EACAU,OAAA;IACA,MAAAC,KAAA;MACA,KAAAtB,OAAA;MACA;QACA;UAAAF;QAAA,UAAAD,IAAA,CAAA0B,GAAA;QACA,KAAAxB,SAAA,GAAAD,IAAA;MACA,SAAA0B,CAAA;QACA,KAAAC,MAAA;MACA;QACA,KAAAzB,OAAA;MACA;IACA;IACA,MAAA0B,cAAAC,IAAA;MACA,MAAAC,EAAA,cAAAC,QAAA,uBAAAF,IAAA,CAAAV,MAAA;MACA,KAAAW,EAAA;MACA;QACA,MAAA/B,IAAA,CAAAiC,MAAA,eAAAH,IAAA,CAAAI,GAAA;QACA,KAAAN,MAAA;QACA,KAAAH,IAAA;MACA,SAAAE,CAAA;QACA,KAAAC,MAAA;MACA;IACA;EACA;EACAO,QAAA;IACA,KAAAV,IAAA;EACA;AACA","ignoreList":[]}]}